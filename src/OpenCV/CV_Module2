import cv2
import os

# Initialize the camera
cap = cv2.VideoCapture(0)

# Define the box coordinates
box_start = (150, 100)  # Top-left corner of the box
box_end = (500, 400)    # Bottom-right corner of the box

# Initialize image counter
img_counter = 1

while True:
    ret, frame = cap.read()
    if not ret:
        break

    # Draw the box on the frame
    cv2.rectangle(frame, box_start, box_end, (0, 255, 0), 2)
    cv2.putText(frame, "Press 'c' to capture, 'q' to quit", (10, 30), cv2.FONT_HERSHEY_SIMPLEX, 0.7, (255, 255, 255), 2)

    # Display the frame with the box
    cv2.imshow("Camera", frame)

    # Check for key press
    key = cv2.waitKey(1) & 0xFF
    if key == ord('c'):  # Press 'c' to capture the image inside the box
        # Crop the image inside the box
        cropped_image = frame[box_start[1]:box_end[1], box_start[0]:box_end[0]]
        
        # Save the captured image with a unique filename
        filename = f"captured_image_{img_counter}.jpg"
        cv2.imwrite(filename, cropped_image)
        print(f"Image saved as '{filename}'")
        img_counter += 1  # Increment the counter for the next capture

    elif key == ord('q'):  # Press 'q' to quit
        break

# Release the camera and close windows
cap.release()
cv2.destroyAllWindows()
